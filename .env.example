# ============================================
# Baklib Docker Compose 环境变量配置示例
# ============================================
# 使用方法：
# 1. 复制此文件为 .env: cp .env.example .env
# 2. 根据实际情况修改各项配置
# 3. 运行安装脚本: ./install.sh
#    或直接启动: ./start.sh

# ============================================
# 基础配置
# ============================================

# Docker 镜像配置
IMAGE_NAME=registry.devops.tanmer.com/baklib-localhost/baklib
IMAGE_TAG=v1.31.1

# CLI 镜像（config/install/import-themes/clean 使用，已由项目预构建发布，无需本地构建）
# 未设置时默认使用 registry.devops.tanmer.com/library/baklib-cli:latest
BAKLIB_CLI_IMAGE=

# 网络名称
KAMAL_NETWORK_NAME=baklib

# ============================================
# Traefik 配置
# ============================================

# Traefik 镜像（可选，默认使用 registry.devops.tanmer.com/library/traefik:v3.1.0）
TRAEFIK_IMAGE=

# 阿里云 DNS 配置（用于 ACME DNS 挑战，可选）
DNS_ALIYUN_ACCESS_KEY=
DNS_ALIYUN_SECRET_KEY=

# ============================================
# 数据库配置
# ============================================

POSTGRES_IMAGE=
POSTGRES_PASSWORD=your_postgres_password_here

# ============================================
# Redis 配置
# ============================================

REDIS_IMAGE=

# ============================================
# 应用核心配置（必填）
# ============================================

# Rails Secret Key Base（必须设置，使用 rails secret 生成）
SECRET_KEY_BASE=your_secret_key_base_here

# 域名配置
MAIN_DOMAIN=baklib.localhost
SAAS_DOMAIN_SUFFIX=.baklib.localhost
FREE_DOMAIN_SUFFIX=.apps.baklib.localhost
CNAME_DNS_SUFFIX=.cname.baklib.localhost

# 本地试用，不需要发送登陆验证码
SHOW_VERIFICATION_CODE=y
INGRESS_PROTOCOL=http
INGRESS_PORT=80

# 服务器配置
EXTERNAL_IP="10.0.10.1" # your_server_ip
ALLOW_CREATE_ORGANIZATION= # true
RESERVED_ORGANIZATION_IDENTIFIERS="www traefik open api sso asset assets"

# 管理员账号（首个用户登录手机号，install 时会预启动并写入数据库）
ADMIN_PHONE=

# ============================================
# ETCD 配置
# ============================================

# ETCD 镜像（可选，默认使用 registry.devops.tanmer.com/library/etcd:v3.5.26）
ETCD_IMAGE=

# ETCD Root 密码（必填，用于 etcd 集群认证）
ETCD_ROOT_PASSWORD=your_etcd_root_password_here

# 注意：
# - ETCD_ENDPOINTS 和 ETCD_USER 在 docker-compose.yml 中已设置为固定值（基于 Docker Compose 服务名称）
# - 如果使用外部 etcd 服务，可以在 docker-compose.yml 的 environment 中覆盖这些值

# ============================================
# 可选配置
# ============================================

SAAS_DOMAIN_TLD_LENGTH=
ASSET_CDN_HOST=
RAILS_MAX_THREADS=5
WEB_CONCURRENCY=4
WEB_MEMORY=4096M
APP_DATABASE_POOL=6
REDIS_POOL=7
API_MAX_PAGE_SIZE=
PAGE_PREVIEW_SKIP_IP_VALIDATION=

# ============================================
# 短信服务配置
# ============================================

# 短信适配器: ucloud, aliyun, qiyewechat
TEXT_MESSAGE_ADAPTER=qiyewechat
TEXT_MESSAGE_LOGIN_TEMPLATE='您的手机验证码为：%{code}'

# UCloud 短信配置
TEXT_MESSAGE_UCLOUD_PUBLIC_KEY=
TEXT_MESSAGE_UCLOUD_PRIVATE_KEY=
TEXT_MESSAGE_UCLOUD_PROJECT_ID=
TEXT_MESSAGE_UCLOUD_SIG_CONTENT=
TEXT_MESSAGE_UCLOUD_BAKLIB_LOGIN_TEMPLATE_ID=
TEXT_MESSAGE_UCLOUD_BAKLIB_LOGIN_TEMPLATE=

# 阿里云短信配置
TEXT_MESSAGE_ALIYUN_ACCESS_KEY_ID=
TEXT_MESSAGE_ALIYUN_ACCESS_KEY_SECRET=
TEXT_MESSAGE_ALIYUN_SIG_CONTENT=
TEXT_MESSAGE_ALIYUN_BAKLIB_LOGIN_TEMPLATE_ID=
TEXT_MESSAGE_ALIYUN_BAKLIB_LOGIN_TEMPLATE=

# 企业微信短信配置
TEXT_MESSAGE_QIYEWECHAT_KEY=

# ============================================
# 存储服务配置
# ============================================

# 存储服务: qinium, aliyun, amazon, local
# 如果设置为 local，需要确保项目根目录下的 storage 目录挂载到容器中
STORAGE_SAAS_DEFAULT_SERVICE=local

# 七牛云存储配置
STORAGE_QINIU_ACCESS_KEY=
STORAGE_QINIU_SECRET_KEY=
STORAGE_QINIU_BUCKET=
STORAGE_QINIU_PROTOCOL=https
STORAGE_QINIU_DOMAIN=

# 阿里云存储配置
STORAGE_ALIIYUN_ACCESS_KEY=
STORAGE_ALIIYUN_SECRET_KEY=
STORAGE_ALIIYUN_BUCKET=
STORAGE_ALIIYUN_ENDPOINT=
STORAGE_ALIIYUN_CDN_HOST=
STORAGE_ALIIYUN_CDN_KEY=
STORAGE_ALIIYUN_PUBLIC=

# AWS 存储配置
STORAGE_AWS_ACCESS_KEY=
STORAGE_AWS_SECRET_KEY=
STORAGE_AWS_BUCKET=
STORAGE_AWS_REGION=
STORAGE_AWS_PUBLIC=
STORAGE_AWS_EXPIRES_IN=
STORAGE_AWS_CDN_HOST=
STORAGE_AWS_CDN_PUBLIC_KEY_ID=
STORAGE_AWS_CDN_PRIVATE_KEY_BASE64=

# ============================================
# 邮件服务配置
# ============================================

# 邮件发送方式: smtp, sendmail, none
MAILER_DELIVERY_METHOD=none
MAILER_SEND_FROM=
MAILER_SMTP_HOST=
MAILER_SMTP_PORT=587
MAILER_SMTP_USERNAME=
MAILER_SMTP_PASSWORD=
MAILER_SMTP_DOMAIN=
MAILER_SMTP_AUTHENTICATION=plain
MAILER_SMTP_ENABLE_STARTTLS_AUTO=true
MAILER_SMTP_SSL=false

# ============================================
# 监控和日志
# ============================================

# Sentry 配置（可选）
SENTRY_DSN=
SENTRY_CURRENT_ENV=

# ============================================
# 其他配置
# ============================================

GITHUB_PROXY_URL=

